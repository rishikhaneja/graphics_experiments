<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 480" font-family="Segoe UI, Arial, sans-serif">
  <rect width="720" height="480" fill="white"/>
  <!-- Title -->
  <text x="360" y="28" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Engine Layer</text>

  <!-- main.ts -->
  <rect x="260" y="44" width="200" height="36" rx="6" fill="#f5f5f5" stroke="#666" stroke-width="1.2"/>
  <text x="360" y="62" text-anchor="middle" font-size="12" font-weight="bold" fill="#333">main.ts</text>
  <text x="360" y="74" text-anchor="middle" font-size="9" fill="#888">wires everything together</text>

  <!-- Arrow main → Engine -->
  <line x1="360" y1="80" x2="360" y2="100" stroke="#666" stroke-width="1" marker-end="url(#arrow-grey)"/>
  <text x="370" y="94" font-size="9" fill="#888">creates</text>

  <!-- Engine (purple outer) -->
  <rect x="40" y="100" width="640" height="330" rx="10" fill="#e8ddf0" stroke="#9673a6" stroke-width="1.5"/>
  <text x="60" y="120" font-size="13" font-weight="bold" fill="#6a4c8a">Engine</text>
  <text x="60" y="134" font-size="9" fill="#888">rAF loop · update / render</text>

  <!-- Scene (blue inner) -->
  <rect x="60" y="145" width="600" height="180" rx="8" fill="#dce8f8" stroke="#6c8ebf" stroke-width="1.2"/>
  <text x="80" y="165" font-size="12" font-weight="bold" fill="#4a6d8c">Scene</text>
  <text x="80" y="178" font-size="9" fill="#888">entities + camera + light · buildFrame()</text>

  <!-- Entity box -->
  <rect x="80" y="190" width="270" height="120" rx="6" fill="#c8daf0" stroke="#6c8ebf" stroke-width="1"/>
  <text x="100" y="210" font-size="11" font-weight="bold" fill="#4a6d8c">Entity []</text>
  <text x="100" y="222" font-size="9" fill="#888">onUpdate · drawCall()</text>

  <!-- Transform -->
  <rect x="95" y="235" width="110" height="60" rx="5" fill="#fff2cc" stroke="#d6b656" stroke-width="1"/>
  <text x="150" y="255" text-anchor="middle" font-size="10" font-weight="bold" fill="#8a7030">Transform</text>
  <text x="150" y="268" text-anchor="middle" font-size="8" fill="#888">pos · rot(quat)</text>
  <text x="150" y="279" text-anchor="middle" font-size="8" fill="#888">scale · parent</text>

  <!-- MeshHandle -->
  <rect x="215" y="235" width="60" height="60" rx="5" fill="#fff2cc" stroke="#d6b656" stroke-width="1"/>
  <text x="245" y="263" text-anchor="middle" font-size="8" font-weight="bold" fill="#8a7030">MeshHandle</text>

  <!-- Material -->
  <rect x="285" y="235" width="60" height="60" rx="5" fill="#fff2cc" stroke="#d6b656" stroke-width="1"/>
  <text x="315" y="263" text-anchor="middle" font-size="8" font-weight="bold" fill="#8a7030">Material</text>

  <!-- OrbitCamera -->
  <rect x="380" y="200" width="120" height="55" rx="6" fill="#c8daf0" stroke="#6c8ebf" stroke-width="1"/>
  <text x="440" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="#4a6d8c">OrbitCamera</text>
  <text x="440" y="233" text-anchor="middle" font-size="8" fill="#888">θ/φ/r · mouse input</text>
  <text x="440" y="244" text-anchor="middle" font-size="8" fill="#888">viewProjection()</text>

  <!-- Light -->
  <rect x="530" y="200" width="110" height="55" rx="6" fill="#c8daf0" stroke="#6c8ebf" stroke-width="1"/>
  <text x="585" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="#4a6d8c">Light</text>
  <text x="585" y="233" text-anchor="middle" font-size="8" fill="#888">position · onUpdate</text>
  <text x="585" y="244" text-anchor="middle" font-size="8" fill="#888">viewProjection()</text>

  <!-- Arrow: Scene → Renderer -->
  <line x1="360" y1="325" x2="360" y2="350" stroke="#82b366" stroke-width="1.2" marker-end="url(#arrow-green)"/>
  <text x="370" y="342" font-size="9" fill="#888">DrawCall[] + FrameUniforms</text>

  <!-- Renderer (green) -->
  <rect x="120" y="350" width="480" height="44" rx="6" fill="#d5e8d4" stroke="#82b366" stroke-width="1.2"/>
  <text x="360" y="370" text-anchor="middle" font-size="12" font-weight="bold" fill="#4a7a44">Renderer</text>
  <text x="360" y="385" text-anchor="middle" font-size="9" fill="#888">WebGL2 | WebGPU · createMesh · createTexture · renderFrame</text>

  <!-- RenderOptions -->
  <rect x="60" y="355" width="50" height="34" rx="4" fill="#f5f5f5" stroke="#666" stroke-width="0.8"/>
  <text x="85" y="371" text-anchor="middle" font-size="8" font-weight="bold" fill="#333">Render</text>
  <text x="85" y="381" text-anchor="middle" font-size="8" font-weight="bold" fill="#333">Options</text>
  <line x1="110" y1="372" x2="120" y2="372" stroke="#666" stroke-width="0.8" stroke-dasharray="3,2"/>

  <!-- Legend -->
  <rect x="60" y="445" width="12" height="10" rx="2" fill="#e8ddf0" stroke="#9673a6" stroke-width="0.8"/>
  <text x="78" y="454" font-size="9" fill="#666">Game loop</text>

  <rect x="160" y="445" width="12" height="10" rx="2" fill="#c8daf0" stroke="#6c8ebf" stroke-width="0.8"/>
  <text x="178" y="454" font-size="9" fill="#666">Scene / engine modules</text>

  <rect x="330" y="445" width="12" height="10" rx="2" fill="#fff2cc" stroke="#d6b656" stroke-width="0.8"/>
  <text x="348" y="454" font-size="9" fill="#666">Entity internals</text>

  <rect x="460" y="445" width="12" height="10" rx="2" fill="#d5e8d4" stroke="#82b366" stroke-width="0.8"/>
  <text x="478" y="454" font-size="9" fill="#666">Renderer backend</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow-grey" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#666" stroke-width="1"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#82b366" stroke-width="1"/>
    </marker>
  </defs>
</svg>
